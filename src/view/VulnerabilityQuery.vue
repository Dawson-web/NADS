<script lang="ts" setup>
import { ElLoading } from "element-plus";
import { ref } from "vue";
import { useAssetStore } from "../store/asset";
import { getActivePinia } from "pinia";

let taskId = ref("");
let taskInfo = ref({});
let isactive = ref(true);
let taskVisible = ref(false);
const assetStore = useAssetStore();
const items = [
  {
    id: 1,
    ip: 200,
    transport: 300,
    country: 400,
    area: 500,
    city: 600,
    port: 700,
    time: 800,
  },
  {
    id: 1,
    ip: 200,
    transport: 300,
    country: 400,
    area: 500,
    city: 600,
    port: 700,
    time: 800,
  },
];

// 任务详情
const getTaskInfo = async () => {
  taskInfo.value = await assetStore.getTaskInfo(taskId.value);
  taskVisible.value = true;
};
</script>
<!-- vulnerability Query -->
<template>
  <div class="DetailedSearch">
    <h1 v-show="!isactive">IP地址</h1>
    <div class="box" :class="{ active: isactive }">
      <div class="input">
        <h1 v-show="isactive">漏洞查询</h1>
        <div>
          <el-input placeholder="请输入要查询的IP" v-model="taskId"></el-input>
          <el-button class="el-button--add" @click="isactive = false"
            >查询</el-button
          >
        </div>
      </div>
    </div>
    <el-descriptions
      direction="vertical"
      :column="8"
      v-for="item in items"
      v-show="!isactive"
      border
    >
      <el-descriptions-item width="10%" label="id">{{
        item.id
      }}</el-descriptions-item>
      <el-descriptions-item width="10%" label="ip">{{
        item.ip
      }}</el-descriptions-item>
      <el-descriptions-item width="10%" label="transport">{{
        item.transport
      }}</el-descriptions-item>
      <el-descriptions-item width="10%" label="Country">{{
        item.country
      }}</el-descriptions-item>
      <el-descriptions-item width="10%" label="area">
        {{ item.area }}
      </el-descriptions-item>
      <el-descriptions-item width="10%" label="city">
        {{ item.city }}
      </el-descriptions-item>
      <el-descriptions-item width="10%" label="port">
        {{ item.port }}
      </el-descriptions-item>
      <el-descriptions-item width="10%" label="time">
        {{ item.time }}
      </el-descriptions-item>
    </el-descriptions>
    <el-pagination
      small
      layout="prev, pager, next"
      :total="50"
      v-show="!isactive"
    />
  </div>
</template>
<style scoped lang="scss">
.DetailedSearch {
  width: 100%;
  height: 100%;
  h1 {
    display: inline-block;
    margin-left: 30px;
  }
}
.box {
  width: 30%;
  margin: 20px;
  float: right;
  .input {
    display: flex;
    flex-direction: row;
    > div {
      width: 80%;
      display: flex;
      flex-direction: row;
    }
  }
}
.active {
  width: 100%;
  height: 100%;
  display: flex;

  justify-content: center;
  margin: 0;

  .input {
    margin-top: 10%;
    padding: 5%;
    display: flex;
    flex-direction: column;
    width: 60%;
    height: 40%;
    box-shadow: rgba(0, 0, 0, 0.16) 0px 10px 36px 0px,
      rgba(0, 0, 0, 0.06) 0px 0px 0px 1px;
    border-radius: 10px;
    h1 {
      text-align: center;
      margin-bottom: 60px;
    }
    > div {
      width: 100%;
      display: flex;
      flex-direction: row;
    }
    .el-input {
      height: 60px;
    }
    .el-button--add {
      height: 60px;
      width: 120px;
      font-size: 20px;
    }
  }
}
.el-button--add {
  background-color: rgb(0, 203, 135);
  color: black;
  width: 60px;
  height: 32px;
}
</style>
